@page "/historicdata"
@inject HttpClient Http



<h1>HistoricData</h1>
<h5>_________________________________</h5>

@if (Mains == null)
{
    <p><em>Problem with API</em></p>

}
else
{
    <h2>Market : @instrument</h2>
    <h2>Granularity : @granularity</h2>

    <h2>Count(candlesticks amount) : @count</h2>

    <p>
        Count Input: <input @bind="count" />
    </p>

    <div class="mb-2 p-3">
        Choose a Instrument
        <select class="form-control" @bind="instrument" @onclick="@GetHistoricDataAsync">
            <option selected disabled value="-1"> Choose a Instrument: </option>
            <option value=AUD_CAD>AUD/CAD</option>
            <option value=AUD_CHF>AUD/CHF</option>
            <option value=EUR_USD>EUR/USD</option>
            <option value=EUR_CAD>EUR/CAD</option>
            <option value=EUR_GBP>EUR/GBP</option>
            <option value=EUR_PLN>EUR/PLN</option>
            <option value=CAD_SGD>CAD/SGD</option>
            <option value=AUD_JPY>AUD/JPY</option>
            <option value=EUR_AUD>EUR/AUD</option>
            <option value=AUD_NZD>AUD/NZD</option>
        </select>
    </div>
    <div class="mb-2 p-3">
        Choose a Granularity (Time Frame)
        <select class="form-control" @bind="granularity" @onclick="@GetHistoricDataAsync">
            <option selected disabled value="-1"> Choose a Granularity (Time Frame): </option>
            <option value=S5>5 Seconds</option>
            <option value=S10>10 Seconds</option>
            <option value=S15>15 Seconds</option>
            <option value=S30>30 Seconds</option>
            <option value=M1>1 Minutes</option>
            <option value=M2>2 Minutes</option>
            <option value=M4>4 Minutes</option>
            <option value=M5>5 Minutes</option>
            <option value=M10>10 Minutes</option>
            <option value=M15>15 Minutes</option>
            <option value=M30>30 Minutes</option>
            <option value=H1>1 Hour</option>
            <option value=H2>2 Hours</option>
            <option value=H3>3 Hours</option>
            <option value=H4>4 Hours</option>
            <option value=H6>6 Hours</option>
            <option value=H8>8 Hours</option>
            <option value=H12>12 Hours</option>
            <option value=D>1 Day</option>
            <option value=W>1 Week</option>
            <option value=M>1 Month</option>
        </select>
    </div>






    <table class="table">
        <thead>
            <tr>
                <th>Complete</th>
                <th>Volume</th>
                <th>Time</th>
                <th>open</th>
                <th>high</th>
                <th>low</th>
                <th>close</th>
            </tr>
        </thead>
        <tbody>
            <tr>


                @if (Mains != null)
                {

                    @foreach (var candles in Mains.candles)
                    {
                        <td>@candles.complete</td>
                        <td>@candles.volume</td>
                        <td>@candles.time</td>
                        <td>@candles.mid.o</td>
                        <td>@candles.mid.h</td>
                        <td>@candles.mid.l</td>
                        <td>@candles.mid.c</td>
                    }
                }

            </tr>
        </tbody>
    </table>


}


